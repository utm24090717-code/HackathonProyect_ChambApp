<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>ChambApp - Cliente</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='customer.css') }}">
</head>
<body>
    <div class="container-task">
        <div class="header">
            <h1>ChambApp</h1>
            <nav>
                <a href="{{ url_for('tareas') }}" class="active">Cliente</a>
                <a href="{{ url_for('worker') }}">Trabajador</a>
            </nav>
        </div>

        <h2>Ofrecer una chamba:</h2>

        <form action="{{ url_for('tareas') }}" method="POST" class="form-task">
            <label for="tarea">Tarea</label>
            <input type="text" id="tarea" name="tarea" required>

            <label for="descripcion">Descripción</label>
            <input type="text" id="descripcion" name="descripcion" required>

            <label for="ofrezco">Ofrezco:</label>
            <input type="text" id="ofrezco" name="ofrezco" required>

            <label for="ciudad">Ciudad / zona:</label>
            <input type="text" id="ciudad" name="ciudad" required>

            <button type="submit" class="btn">Subir Tarea</button>
        </form>

        <h2>Mis tareas:</h2>
        {% if tareas %}
            <ul class="tareas-lista">
                {% for t in tareas %}
                    {% if t.creador == session['correo'] %}
                        <li>
                            <h3>{{ t.titulo }}</h3>
                            <p>{{ t.descripcion }}</p>
                            <p><strong>Ofrezco:</strong> {{ t.ofrezco }}</p>
                            <p><strong>Ciudad:</strong> {{ t.ciudad }}</p>
                            {% if t.trabajador %}
                                <p><b>Trabajador:</b> {{ t.trabajador }}</p>
                                {% if not t.pagada %}
                                    <a href="https://wallet.interledger-test.dev" target="_blank">
                                        <button type="button" class="btn">Pagar</button>
                                    </a>
                                {% else %}
                                    <p>✅ Ya pagada</p>
                                {% endif %}
                            {% else %}
                                <p><i>Aún no hay trabajador asignado</i></p>
                            {% endif %}
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        {% else %}
            <p>No has subido ninguna tarea aún.</p>
        {% endif %}
    </div>
</body>
</html>

